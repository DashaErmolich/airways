<app-search-summary></app-search-summary>

<div class="container summary-container">
  <div class="passengers-container">
    <section *ngFor="let flight of flights" class="flight">
      <section *ngIf="flight" class="flight-wrapper flight colored-border">
        <article class="flight__item_highlight flight-container">
          <div class="passenger__header">
            <p class="color-primary-blue">{{ flight.flightNumber }}</p>
            <p>{{ flight.form.city }} - {{ flight.to.city }}</p>
          </div>
            <p>{{ flight.takeoffDate | date:'full' }}</p>
            <p>{{ flight.landingDate | date:'full' }}</p>
        </article>

        <article class="passengers-details">
          <div *ngFor="let passenger of passengers" class="passenger flight-container">
            <p>{{ passenger.firstName | uppercase }} {{ passenger.lastName | uppercase }}</p>
            <div class="baggage-container">
              <p>{{ passenger.cabinBag }} x Cabin baggage</p>
              <p *ngIf="passenger.checkedBag">{{ passenger.checkedBag }} x Checked baggage</p>
            </div>
          </div>
        </article>
      </section>
    </section>
  </div>

  <section class="payment-details flight-container flight-wrapper">
      <article class="">
        <p class="font-weight-bold">Adult fare {{ getAdultTotal() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        <div class="baggage-container">
          <p>Fare {{ getAdultFare() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
          <p>Tax & Service Charge {{ getTax() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        </div>
      </article>
      <article class="" *ngIf="child.length">
        <p class="font-weight-bold">Child fare {{ getChildTotal() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        <div class="baggage-container">
          <p>Fare {{ getChildFare() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
          <p>Tax & Service Charge {{ getTax() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        </div>
      </article>
      <article class="" *ngIf="infant.length">
        <p class="font-weight-bold">Infant fare {{ getInfantTotal() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        <div class="baggage-container">
          <p>Fare {{ getInfantFare() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
          <p>Tax & Service Charge {{ getTax() | currency:(currency$ | async)! : 'symbol-narrow' }}</p>
        </div>
      </article>
      <span class="font-weight-bold total-payment">TOTAL: {{ getTotalPice() | currency:(currency$ | async)! : 'symbol-narrow' }}</span>
  </section>
</div>

<div class="page-actions">
  <app-go-back-button></app-go-back-button>
  <button mat-raised-button color="primary" (click)="buyNow()">Buy now</button>
  <button mat-raised-button color="primary" (click)="addToCart()">Add to cart</button>
</div>
